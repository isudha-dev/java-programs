package dsa.prefixsum;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;

public class EquilibriumIndexOfArray {

    public static void main(String[] args) {

        System.out.println(solve1(new ArrayList<Integer>(Arrays.asList(new Integer[] { 1, 2, 3, 7, 1, 2, 3 }))));
    }

    static int solve(int[] A) {

        int n = A.length;
        int[] ps = getPrefixSumArray(A, false, false);
        int sumL = 0;
        int sumR = 0;
        for (int i = 0; i < n; i++) {
            if (i == 0) {
                sumL = 0;
            } else {
                sumL = getSumOfPSRange(ps, 0, i - 1);
            }
            sumR = getSumOfPSRange(ps, i + 1, n - 1);
            if (sumL == sumR) {
                return i;
            }

        }

        return -1;
    }

    static int solve1(ArrayList<Integer> A) {
        int n = A.size();
        int ans = -1;
        ArrayList<Integer> psL = new ArrayList<>();
        psL.add(0, A.get(0));
        for (int i = 1; i < n; i++) {
            psL.add(i, psL.get(i - 1) + A.get(i));
        }

        ArrayList<Integer> psR = new ArrayList<>();
        int j = 0;
        psR.add(j, A.get(n - 1));
        for (int i = n - 2; i >= 0; i--) {
            j++;
            psR.add(psR.get(j - 1) + A.get(i));
        }
        Collections.reverse(psR);

        // failing for edge cases of i = 0 and i = n-1
        for (int i = 0; i < n; i++) {

            if ((psL.get(i).intValue() == psR.get(i).intValue())
                    && (psL.get(i - 1).intValue() == psR.get(i + 1).intValue())) {
                ans = i;
                break;
            }

        }

        return ans;

    }

    static int[] getPrefixSumArray(int[] arr, boolean odd, boolean even) {
        int n = arr.length;

        int[] ps = new int[n];
        int[] pse = new int[n];
        int[] pso = new int[n];

        if (arr.length != 0) {
            if (odd) {
                pso[0] = 0;
                for (int i = 1; i < n; i++) {
                    if (i % 2 == 0) {
                        pso[i] = pso[i - 1];
                    } else {
                        pso[i] = pso[i - 1] + arr[i];
                    }
                }
            } else if (even) {
                pse[0] = arr[0];
                for (int i = 1; i < n; i++) {
                    if (i % 2 == 0) {
                        pse[i] = pse[i - 1] + arr[i];
                    } else {
                        pse[i] = pse[i - 1];
                    }
                }
            } else {
                ps[0] = arr[0];
                for (int i = 1; i < n; i++) {
                    ps[i] = ps[i - 1] + arr[i];
                }
            }
        }

        if (odd)
            return pso;
        else if (even)
            return pse;
        else
            return ps;

    }

    static int getSumOfPSRange(int[] ps, int start, int end) {
        if (start == 0) {
            return ps[end];
        }

        return ps[end] - ps[start - 1];

    }
}

/*-9567, 4282, -8150, -507, -4368, 7650, 7834, 5994, 6029, 5977, -8131, 8327, 3421, 9402, -4050, 7917, -5939, -942, -6335, -2009, 5579, 2814, -2182, 2974, 6038, -7243, -9261, 8571, -74, 5663, -1680, -1180, -7929, -5241, -4283, -7102, 8716, -2030, 9839, 4754, 7722, -4286, 3694, 109, -59, -7893, -8036, 8136, 704, -7362, 6050, 5782, 1408, -9171, -2858, 9037, -9765, -8160, -8906, 1405, 2724, -1525, -3142, -2331, -6559, -6712, 5717, 6692, -2836, 4884, -9282, -8093, -1108, -4037, -6764, 6636, 1113, 2372, 2314, -863, 5107, 1962, 332, 9255, -952, -3059, -763, -1010, -8148, -4187, -6949, -9266, -6649, -1086, -1823, 1172, 7468, 3576, -2651, -2810, 1327, -4869, -2638, -194, 1668, 4050, 4008, 4203, -8614, -4107, 3707, -4164, 759, -3964, 4149, -8391, -5467, 5070, 6646, 2723, 904, 5479, -3756, 4658, 4062, -9748, -7888, 3846, 5479, -1837, 9681, 7306, -6371, -8648, -9198, 8204, 1090, -1853, 405, -1200, -4693, 3426, 548, -442, 9966, 9007, -4362, 1204, -1166, -8452, -9174, 3597, -2045, -2079, -3192, 4880, -7953, -2939, 7343, 1277, -2347, -2526, 7729, -7062, -3200, 9711, -8148, -5192, 2015, -9040, 4451, -2866, -9280, -1428, 1601, -3913, -7821, 2407, -8553, 3208, -8036, 5504, 230, 5581, 2992, 4554, -1305, 5040, 1350, 6145, -8674, 1838, -8340, 5663, 5000, 6941, -3385, -4323, 5479, 5561, 2765, 7494, 2773, 3704, -3010, -636, -3644, -4567, 2449, 3915, -353, -8880, -370, 2873, 9045, 8600, 6881, 9702, 4767, -587, 4684, 2002, 3471, -6580, -5013, -8027, -3364, -3163, 2114, -6655, 4191, -5744, -4798, 7604, -2697, -2367, -3678, -4537, -7843, 748, 910, 2253, 2549, -4975, 7251, -2691, 9460, -19, 338, -1454, 4184, -4846, 9527, -9705, 6109, -5078, 3366, 5740, -1281, -5422, 6854, 4534, 2823, 9693, -8986, -6408, 4579, -4497, -6209, -8900, 5450, -4754, -3622, -3314, -1627, 265, 5987, 8514, -9536, -324, 6247, 1841, 2614, 9397, 3512, -7554, 1691, 4304, -1112, 3789, 8212, -4595, -729, 5671, -3167, -3448, 6861, -2790, 5387, 2572, -4657, -6065, 565, -2281, -8854, -8131, 7003, 5690, 2997, 4270, 1647, 405, -9540, -3289, -8486, -9280, -4131, 1922, 2244, 6311, -3125, 3156, -2776, -7586, 6614, 4065, -3392, 336, -5931, -4488, -967, -7013, -1896, 4905, 3854, -352, -2333, 3925, -4450, -2947, 3731, 3545, -7588, 3047, 7058, -652, -3031, 9708, -5050, 9896, -1990, 7437, 2033, 1836, 1020, 1184, -1879, 6986, -1442, 3706, 5075, -3121, -9057, -2218, -3482, 4503, 3820, -6814, -5543, 2953, 5419, -4234, 5083, -7989, -9044, 4759, 5001, -4816, -1455, -8982, 6230, 3789, 2067, 8913, -7197, -5700, -9605, -8917, 1602, 9068, 6983, -9851, 6490, -3681, -4583, 7416, -9859, -4794, -7003, -5078, -6571, 2147, -3032, -3745, 4378, 552, -6223, 1308, 3407, -2074, -8225, -9206, -811, 3335, -8321, -2336, -9302, -8629, 1250, 876, -2147, -9869, -684, -4668, 5552, 1592, -1862, -2060, -6691, 7282, -231, -6022, -8175, 3090, 23, -1629, 4508, -777, 6424, 9660, 5148, 487, -8604, -9050, -8296, -5051, 1232, 2182, -5361, -2854, 1218, -7355, -6655, -1729, -5164, -1944, -306, -4147, 8714, -6277, 1108, -9160, 7330, -6345, 4768, 2387, 1281, 2193, 9069, 5224, -1424, -5967, -5322, 8263, 7794, -7210, 4531, 1829, 4972, -3197, 2109, 1927, -7533, -4550, 6185, 4942, 6430, -2290, 9205, 2406, 4109, 4017, 8010, -4812, 287, 7817, -9775, 8070, 3510, 5722, -7001, -9778, 1177, -7398, 7125, -9041, -8945, 8841, 4140, 8770, 1732, 4705, -9492, 2868, -9211, -3526, -4864, -9068, -4073, -5433, 6376, 7314, 7935, 8647, 2811, -2688, 2510, -1002, -3529, -8859, -3419, 9237, -4087, -9237, 6027, -5347, -5957, -3261, -9781, -905, 405, -8287, 2930, -1011, -9123, -7448, -482, 3555, -5767, 9878, -7135, 8479, -3306, -6033, 9624, 5480, -3615, 1633, 8225, -1602, 4878, 3622, -7586, -2040, 7472, 3912, -1787, 4356, 4270, -3100, -3538, -4678, -588, 3346, 6, -8615, -7688, -5733, -6071, -9479, 9312, 7716, -9107, -9610, -1293, 914, -5513, 7474, -2969, -8765, -8385, -5457, -1915, -5540, -3095, -8457, 6298, -8301, 8233, 1029, -4112, 2573, 2999, 9666, -809, 2257, 2203, -3387, 570, 6012, 5346, -3049, -9127, -1107, -8724, 6999, -1803, 6059, -7293, 3701, 9062, 4683, -936, 7469, -4921, 4463, -7966, 6283, 4111, -7324, 2921, -6848, -7417, -4208, 4091, 4538, -5774, 4881, -7206, 5092, -5863, -8729, -4802, 9619, -2294, 8733, 4161, 7050, -2423, -9985, -2006, 1193, -9158, -3103, 3704, -9680, 5482, 3379, 7462, -7796, 7093, -7317, -7236, -1509, -4516, -7529, -5514, 7038, 3530, 5514, 6408, 2528, 3836, 2356, -6926, -5410, -5950, -8132, 2058, -6010, -978, -4080, -5457, 4366, -6540, 9812, -5810, 6537, -9194, -5296, 6306, -5225, -3031, -7157, 9866, 3675, 9126, -7522, 5244, -295, -5015, -2796, -6973, -2139, 7290, -3673, -2610, -7329, -810, 8879, 3250, -6699, 500, -960, 5795, -6513, 6157, -5470, 8876, -3657, 2257, 2402, -7110, 5820, -7334, 2321, -3148, 6831, -7754, 2049, -6758, 5024, 6154, -6541, -6987, -7337, 7168, 546, -8561, 4313, 7753, 2398, -7691, -3355, 5309, 6411, -5404 */
/*-2892, 5148, -6190, 3966, 996, -3497, -2880, 783, 5982, 5405, 9517, 9458, 5188, 1184, 2875, 6116, -9891, -4253, -1333, 1915, 2058, 1647, -3224, -5148, 7820, -9879, -693, 5808, 5620, 7074, 6454, -9249, -5100, -5055, -943, 9105, 3146, -9434, 8641, 3066, -6946, 3874, -6776, -1644, 2486, 2266, -5125, 3221, -3619, -5566, 3217, -9906, -7508, -6257, 6210, 4188, -727, -4398, -8907, -5992, -3649, 44, 9322, -7698, 8524, 8840, -4727, 2077, -944, 8453, 9663, 4734, -478, -4399, 2228, 845, 8463, 3560, -6235, -5085, 5688, 9374, -7241, -1489, -5827, 7861, -5807, 6771, -9662, 6614, 7722, -239, 3523, -1666, -7196, 9175, 5068, -7873, 5979, 7105, -9524, 8359, -4185, -2066, -8825, -8236, 384, -1139, -732, -8474, -9344, -1273, -3333, -7335, -6474, -9874, 2095, -2382, -6021, 3767, 9524, 177, -2102, -748, 8384, 2432, 9842, -1574, -3696, 2779, 1627, 563, 6028, 7541, 41, 6361, 5342, 6238, 5539, 5997, -3222, 6504, 8070, 313, 2880, 388, -1838, -703, 6951, 5878, -9960, -5627, 9264, -5900, -6253, -1528, -8888, 7291, 6255, 9903, -2628, 2818, 7974, 9763, 3638, -1145, -8133, -1923, -6717, 8967, -3976, 9639, 2366, 4353, -97, -7662, 9848, 7419, -4860, -5128, -1296, 3419, -305, -1498, 5672, 1502, 8375, -795, -4311, -3062, -755, -3545, -1509, 3762, 3174, -2473, -231, -3421, 5736, -2538, 6552, 9651, -9453, 7562, 3700, -9534, -169, -553, 1741, -1550, -1641, -8584, -7116, 1047, -2110, 490, 3892, -7016, 7143, 5667, 5971, -1718, -7779, -5976, 8400, -1619, 8898, -1726, 7944, -5882, -6721, -6652, -9326, -1765, 3541, 2507, -6068, 2916, -7680, 8312, -6060, 7750, -2140, -2503, 7248, 6013, -7934, 5926, -1546, -9047, -323, -5033, 4631, -8421, 8221, -1760, 4024, 9562, -3847, 5038, -7319, 1245, -2486, -2559, 5345, 4291, -9248, -7083, -5319, -4400, 2167, -3018, 7730, 5952, 1844, -5307, -7432, -3889, -1403, -6607, 9622, 1745, 7246, 7076, 1501, 4019, 6266, -8373, -1651, 4717, -9970, -2113, 7337, -2764, -235, -7663, 9702, -954, -7553, 6326, -2751, -6938, 5672, -7356, -4202, 6075, -3699, -7614, -1804, -4278, 9811, 2485, 2688, 7674, -2865, -4165, 4470, 4443, -3256, -8269, -1724, -1269, -8155, 7340, 2271, -5885, 5384, 746, 482, -2593, 4584, 3891, -6059, 2764, -1113, -3777, 5381, 9905, -7227, 4354, -2794, -485, 5150, -8440, 9611, -8524, 2822, 6455, -4516, 9802, -5258, -5589, 8290, -3226, -2317, -3337, 8460, -3988, -8786, 8391, 8560, -8522, -2929, -7350, -10000, -6644, 2487, 9128, 1387, -5535, -2863, 1186, 5794, -3405, -1042, 1519, -4013, -4324, 561, 8420, -6794, 8572, 7233, -5277, 7361, -2615, 8592, -7697, -9074, -7403, 8576, -6983, -9754, -2297, 1271, 2859, 6942, -3329, -2183, 1282, 708, 8294, 7673, -4083, 2026, -604, 1702, 4462, -9521, -7183, -4800, -3565, 3626, -7486, 2481, 5728, 4223, -9062, -2549, 8249, -203, 7770, -4907, -3207, 5047, -8765, -3304, -4832, 5709, -7236, -4093, 9512, -4733, 4878, 187, 4566, 104, 2012, -5813, 6403, -3415, -2033, -8487, -2156, 9099, 2870, 6650, 5251, -7561, -8104, -1260, -3859, -8794, 4418, -3726, 1790, -6598, -2431, -3959, 4872, -7310, -1615, 4226, -7550, 107, -246, -7002, -8377, 4871, -4832, 8545, 1015, 8532, -3075, 4054, 7402, -9177, -4563, 5066, 2542, -5262, 9866, -3574, -1851, -1677, 3415, 6556, 1528, 3220, 806, -3178, -9444, 6616, 2619, 9930, -720, 4782, -2951, 4754, 2654, -1112, -6764, -1617, 3771, -6393, -6333, 895, 652, -9680, 609, 8440, -8784, 578, 4069, -9495, 6477, -1093, -4367, -3328, -5930, -9292, -9617, 783, -297, 7478, 7227, -9645, -9704, -6031, 5041, -517, 9046, 4922, 7893, -7238, -4559, 5007, -9338, 8399, 2913, 4959, 6848, 9, 5549, 1538, -3061, -1296, 7782, -4849, -1830, 3451, -5244, 9401, -225, 8923, -7365, -8224, -8925, 2256, 4, 3592, -2186, -7553, 770, -2837, 455 */
/*
 * 9444, -2556, 7937, 8560, -8622,1440, -1076, 5987, 1419, 996, -6530, 4583,
 * 8890, -9127, 8801, 9034, -1579, -4395, 1050, 6527, 5959,-1281, -8832, 1363,
 * -9296, -3791, -1316, 4780, 5836, -706, 4650, -3278, 8168, 1329, -3756, 7923,
 * 7291,-6320, -5414, -136, -9627, 4609, -4626, -4655, -7457, -6424, -3573,
 * -970, -5699, 6139, -6334, 2140,-3101, 8478, 1816, -4737, -8118, 9277, 8167,
 * -4375, 9711, -7224, -7777, 2887, -9884, 1275, -1116, -7240,5451, -3481, 9449,
 * 5439, -9104, 3421, 6344, 6995, 7847, 5166, 2801, 2217, 1640, -8209, -8756,
 * 1586, 121,-908, 276, -8674, 6499, 818, 6184, -5044, 1257, -5923, 7377, 9104,
 * 1040, 2587, -2676, -1172, -4221, -78,3611, 4554, -4625, 7293, -8077, 1468,
 * 7559, 9935, -7793, -1770, -9166, 3555, 3671, -7560, 9206, -4264,-3848, 2776,
 * 3998, -5961, -8423, -1288, -527, 9968, 1847, -6388, 5042, 8210, -4318, 9107,
 * 525, -278,-7763, 681, -9369, 7563, 5352, 7773, -8169, 3940, 7088, -1872,
 * -5870, 7555, -3032, -2497, 4134, -2995,3942, 9092, -7739, 6576, 3955, -5175,
 * -9007, 5402, -6827, -3777, 6057, -150, -4567, -94, 5921, -9395,-6154, 6385,
 * -8445, 8889, 921, -7543, -4650, 6461, -7468, -8693, 328, 1855, 7683, 495,
 * -195, 2554, 7950,-1983, -5252, -5584, -9061, -5734, 5425, -7041, 9495, 4647,
 * 1810, -5899, -1038, -5730, -6674, 3818,-2146, -7694, -9968, -5853, 9552,
 * -164, 7672, 9711, -1281, 1151, -1314, -9926, 2948, -1280, 686, 1711,-624,
 * -5462, -8864, 2365, 7361, -4694, 2877, -339, -1560, -2100, -2342
 */